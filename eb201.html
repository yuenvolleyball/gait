<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>eb201</title>

  <!-- ✅ 不讓瀏覽器亂猜 MIME type -->
  <meta http-equiv="X-Content-Type-Options" content="nosniff">

  <!-- ✅ 不自動帶 referrer（避免把完整網址傳給別的站） -->
  <meta name="referrer" content="no-referrer">

  <!-- ✅ 基礎 Content-Security-Policy（CSP）
       - 預設只允許載入本機資源
       - frame-src 明確允許你要嵌入的網域
       之後如果有第 2、3 個頁面，記得在 frame-src 補上對應網域 -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self';
                 frame-src 'self' https://yucheese.github.io https://example.com;
                 script-src 'self' 'unsafe-inline';
                 style-src 'self' 'unsafe-inline';
                 img-src 'self' data:;">

  <style>
    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: radial-gradient(circle at top, #1e293b, #020617);
      color: #e5e7eb;
    }

    .wrapper {
      width: 100%;
      max-width: 960px;
      padding: 24px 20px 28px;
    }

    .card {
      background: rgba(15, 23, 42, 0.93);
      border-radius: 18px;
      padding: 22px 20px 20px;
      box-shadow:
        0 18px 40px rgba(15, 23, 42, 0.8),
        0 0 0 1px rgba(148, 163, 184, 0.2);
      backdrop-filter: blur(10px);
    }

    .title {
      font-size: 20px;
      font-weight: 700;
      margin: 0 0 4px;
      letter-spacing: 0.03em;
    }

    .subtitle {
      font-size: 13px;
      color: #9ca3af;
      margin-bottom: 16px;
    }

    .button-group-title {
      font-size: 13px;
      color: #cbd5f5;
      margin-bottom: 10px;
      letter-spacing: 0.06em;
      text-transform: uppercase;
    }

    .btn-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 14px;
    }

    .btn {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 10px 16px;
      border-radius: 999px;
      border: none;
      font-size: 14px;
      font-weight: 600;
      letter-spacing: 0.03em;
      cursor: pointer;
      transition:
        transform 0.12s ease-out,
        box-shadow 0.12s ease-out,
        background 0.15s ease-out,
        opacity 0.15s ease-out;
      box-shadow:
        0 8px 18px rgba(15, 23, 42, 0.7),
        0 0 0 1px rgba(148, 163, 184, 0.45);
      outline: none;
      white-space: nowrap;
    }

    .btn-primary {
      background: linear-gradient(135deg, #3b82f6, #22c1c3);
      color: #f9fafb;
    }

    .btn-secondary {
      background: linear-gradient(135deg, #4b5563, #1f2933);
      color: #e5e7eb;
    }

    .btn-disabled {
      background: radial-gradient(circle at top left, #111827, #020617);
      color: #6b7280;
      box-shadow: 0 0 0 1px rgba(75, 85, 99, 0.6);
      cursor: not-allowed;
      opacity: 0.7;
    }

    .btn:hover:not(.btn-disabled) {
      transform: translateY(-1px);
      box-shadow:
        0 14px 26px rgba(15, 23, 42, 0.9),
        0 0 0 1px rgba(191, 219, 254, 0.8);
    }

    .btn:active:not(.btn-disabled) {
      transform: translateY(0);
      box-shadow:
        0 4px 10px rgba(15, 23, 42, 0.9),
        0 0 0 1px rgba(59, 130, 246, 0.9);
    }

    .badge {
      font-size: 10px;
      padding: 2px 7px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.85);
      color: #a5b4fc;
      border: 1px solid rgba(129, 140, 248, 0.7);
    }

    .viewer-wrapper {
      margin-top: 10px;
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: #020617;
    }

    #viewer {
      width: 100%;
      height: 70vh; /* 可依需要調整高度 */
      border: none;
      background: #020617;
    }

    .footer-note {
      font-size: 11px;
      color: #6b7280;
      text-align: right;
      margin-top: 6px;
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <div class="card">
      <h1 class="title">Gait AI 助理</h1>
      <div class="subtitle"></div>

      <div class="button-group-title">Pages</div>

      <div class="btn-row">
        <!-- ✅ 第 1 個：你的 chat_ui_with_voice 頁面 -->
        <button
          class="btn btn-primary"
          type="button"
          data-url="https://yucheese.github.io/assistant/chat_ui_with_voice.html">
          運動AI助理
          <span class="badge">AI</span>
        </button>

        <!-- TODO：之後有第 2 個頁面時，在這裡改掉 data-url -->
        <button
          class="btn btn-secondary"
          type="button"
          data-url="https://example.com/page2">
          SQL
        </button>

        <!-- TODO：第三個要啟用時，加上 data-url 並移除 .btn-disabled -->
        <button class="btn btn-disabled" type="button">

        </button>
      </div>

      <div class="viewer-wrapper">
        <!-- ✅ iframe 加 sandbox + referrerpolicy -->
        <iframe
          id="viewer"
          src=""
          frameborder="0"
          sandbox="allow-scripts allow-same-origin"
          referrerpolicy="no-referrer">
        </iframe>
      </div>

      <div class="footer-note">
        此頁只載入白名單內的頁面，避免被當作轉址或釣魚入口。
      </div>
    </div>
  </div>

  <script>
    "use strict";

    // ✅ 基本防護 1：防止這個入口頁被嵌在別人的 iframe 裡（簡單的 anti-clickjacking）
    try {
      if (window.top !== window.self) {
        window.top.location = window.location;
      }
    } catch (e) {
      // 有些瀏覽器在跨網域時會擋住，這裡就安靜略過
    }

    // ✅ 基本防護 2：只允許「我們預先寫好的白名單 URL」
    // 不接受使用者輸入網址，避免被拿來當 open redirect / 釣魚跳板
    (function initButtonsAndIframe() {
      const iframe = document.getElementById("viewer");
      const buttons = document.querySelectorAll(".btn[data-url]");

      function loadPage(url) {
        // 這裡再簡單驗證一下：只接受 https 開頭，避免怪東西
        if (typeof url !== "string" || !url.startsWith("https://")) {
          console.warn("Blocked non-https or invalid url:", url);
          return;
        }
        iframe.src = url;
      }

      buttons.forEach((btn) => {
        btn.addEventListener("click", () => {
          const url = btn.getAttribute("data-url");
          if (!url) return;
          loadPage(url);
        });
      });

      // 預設載入你的主頁面
      loadPage("https://yucheese.github.io/assistant/chat_ui_with_voice.html");
    })();
  </script>
</body>
</html>

